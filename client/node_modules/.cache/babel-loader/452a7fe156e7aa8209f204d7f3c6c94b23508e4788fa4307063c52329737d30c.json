{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/DexcomCGM/client/src/components/AppControl.js\";\nimport React, { useEffect, useState } from 'react';\nimport CurrentBloodSugar from './CurrentBloodSugar.js';\nimport Calibrate from './Calibrate.js';\nimport AddHighSymptom from './AddHighSymptom.js';\nimport AddLowSymptom from './AddLowSymptom.js';\nimport AddSymptom from './AddSymptom.js';\nimport DexcomError from './DexcomError.js';\nimport Graph from './Graph.js';\nimport FootNavigation from './AppFooter.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AppControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.authorizeDexcomUser = () => {\n      let code = window.location.search.slice(6, 38);\n      fetch('/authorizeDexcomUser?code=' + code).then(response => response.json()).then(data => {\n        this.setState({\n          bloodSugarValues: data.egvs\n        });\n        console.log(data);\n      });\n    };\n    this.handleAlert = () => {\n      if (this.state.currentBloodSugar <= this.state.lowAlert) {\n        this.setState({\n          currentView: 'add_low_symptom',\n          currentAlert: 'lowAlert'\n        });\n      } else if (this.state.currentBloodSugar >= this.state.highAlert) {\n        this.setState({\n          currentView: 'add_high_symptom',\n          currentAlert: 'highAlert'\n        });\n      } else {\n        this.setState({\n          currentAlert: 'noAlert'\n        });\n      }\n    };\n    this.handleSwitchingViews = view => {\n      this.setState({\n        currentView: view\n      });\n    };\n    this.handleCalibrate = e => {\n      this.setState({\n        currentBloodSugar: parseInt(e.target.value)\n      });\n    };\n    this.state = {\n      error: null,\n      isLoaded: false,\n      bearerToken: '',\n      currentBloodSugar: null,\n      lowAlert: 70,\n      highAlert: 180,\n      currentAlert: 'noAlert',\n      //'lowAlert or 'highAlert'\n      bloodSugarValues: null,\n      currentView: null,\n      timer: null\n    };\n  }\n  componentDidMount() {\n    if (this.state.bearerToken === '') {\n      this.authorizeDexcomUser();\n    } else {\n      this.getBloodSugars(this.state.bearerToken);\n    }\n    setInterval(() => {\n      this.getBloodSugars(this.state.bearerToken);\n      this.handleAlert();\n    }, 60000);\n  }\n  render() {\n    let currentlyVisibleState = null;\n    if (this.state.bloodSugarValues != null) {\n      switch (this.state.currentView) {\n        case 'calibrate':\n          currentlyVisibleState = /*#__PURE__*/_jsxDEV(Calibrate, {\n            onCalibrate: this.handleCalibrate,\n            onSwitchingViews: this.handleSwitchingViews,\n            alertCheck: this.handleAlert\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 45\n          }, this);\n          break;\n        case 'add_symptom':\n          currentlyVisibleState = /*#__PURE__*/_jsxDEV(AddSymptom, {\n            onSwitchingViews: this.handleSwitchingViews\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 45\n          }, this);\n          break;\n        case 'add_low_symptom':\n          currentlyVisibleState = /*#__PURE__*/_jsxDEV(AddLowSymptom, {\n            onSwitchingViews: this.handleSwitchingViews\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 45\n          }, this);\n          break;\n        case 'add_high_symptom':\n          currentlyVisibleState = /*#__PURE__*/_jsxDEV(AddHighSymptom, {\n            onSwitchingViews: this.handleSwitchingViews\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 45\n          }, this);\n          break;\n        case 'graph':\n          currentlyVisibleState = /*#__PURE__*/_jsxDEV(Graph, {\n            values: this.state.bloodSugarValues,\n            onSwitchingViews: this.handleSwitchingViews\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 45\n          }, this);\n          break;\n        case 'home':\n          currentlyVisibleState = /*#__PURE__*/_jsxDEV(CurrentBloodSugar, {\n            value: this.state.currentBloodSugar,\n            currentAlert: this.state.currentAlert,\n            onSwitchingViews: this.handleSwitchingViews\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 45\n          }, this);\n          break;\n        default:\n          currentlyVisibleState = /*#__PURE__*/_jsxDEV(CurrentBloodSugar, {\n            value: this.state.currentBloodSugar,\n            currentAlert: this.state.currentAlert,\n            onSwitchingViews: this.handleSwitchingViews\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 45\n          }, this);\n      }\n    } else {\n      currentlyVisibleState = /*#__PURE__*/_jsxDEV(DexcomError, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 37\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [currentlyVisibleState, /*#__PURE__*/_jsxDEV(FootNavigation, {\n        isLoggedIn: true,\n        onSwitchingViews: this.handleSwitchingViews,\n        currentAlert: this.state.currentAlert\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default AppControl;","map":{"version":3,"names":["React","useEffect","useState","CurrentBloodSugar","Calibrate","AddHighSymptom","AddLowSymptom","AddSymptom","DexcomError","Graph","FootNavigation","jsxDEV","_jsxDEV","AppControl","Component","constructor","props","authorizeDexcomUser","code","window","location","search","slice","fetch","then","response","json","data","setState","bloodSugarValues","egvs","console","log","handleAlert","state","currentBloodSugar","lowAlert","currentView","currentAlert","highAlert","handleSwitchingViews","view","handleCalibrate","e","parseInt","target","value","error","isLoaded","bearerToken","timer","componentDidMount","getBloodSugars","setInterval","render","currentlyVisibleState","onCalibrate","onSwitchingViews","alertCheck","fileName","_jsxFileName","lineNumber","columnNumber","values","Fragment","children","isLoggedIn"],"sources":["/Users/macbook/Desktop/DexcomCGM/client/src/components/AppControl.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport CurrentBloodSugar from './CurrentBloodSugar.js';\nimport Calibrate from './Calibrate.js';\nimport AddHighSymptom from './AddHighSymptom.js';\nimport AddLowSymptom from './AddLowSymptom.js';\nimport AddSymptom from './AddSymptom.js';\nimport DexcomError from './DexcomError.js';\nimport Graph from './Graph.js';\nimport FootNavigation from './AppFooter.js';\n\nclass AppControl extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            bearerToken: '',\n            currentBloodSugar: null,\n            lowAlert: 70,\n            highAlert: 180,\n            currentAlert: 'noAlert', //'lowAlert or 'highAlert'\n            bloodSugarValues: null,\n            currentView: null,\n            timer: null\n        };\n    }\n\n    authorizeDexcomUser = () => {\n            let code = window.location.search.slice(6, 38);\n            fetch('/authorizeDexcomUser?code='+ code).then(\n                response => response.json()\n            ).then(\n                data => {\n                    this.setState({bloodSugarValues: data.egvs});\n                    console.log(data)\n                }\n            ) \n    }\n\n    componentDidMount() {\n        if (this.state.bearerToken === '') {\n            this.authorizeDexcomUser();\n        } \n        else {\n            this.getBloodSugars(this.state.bearerToken);\n        }\n        setInterval(() => {\n            this.getBloodSugars(this.state.bearerToken);\n            this.handleAlert();\n        }, 60000);\n    }\n\n    handleAlert = () => {\n        if (this.state.currentBloodSugar <= this.state.lowAlert) {\n            this.setState({ currentView: 'add_low_symptom', currentAlert: 'lowAlert' })\n        } else if (this.state.currentBloodSugar >= this.state.highAlert) {\n            this.setState({ currentView: 'add_high_symptom', currentAlert: 'highAlert' })\n        } else {\n            this.setState({ currentAlert: 'noAlert' })\n        }\n    }\n\n    handleSwitchingViews = (view) => {\n        this.setState({ currentView: view });\n    }\n\n    handleCalibrate = (e) => {\n        this.setState({ currentBloodSugar: parseInt(e.target.value) })\n    }\n\n    render() {\n        let currentlyVisibleState = null;\n        if (this.state.bloodSugarValues != null) {\n            switch (this.state.currentView) {\n                case 'calibrate':\n                    currentlyVisibleState = <Calibrate onCalibrate={this.handleCalibrate} onSwitchingViews={this.handleSwitchingViews} alertCheck={this.handleAlert} />\n                    break;\n                case 'add_symptom':\n                    currentlyVisibleState = <AddSymptom onSwitchingViews={this.handleSwitchingViews} />\n                    break;\n                case 'add_low_symptom':\n                    currentlyVisibleState = <AddLowSymptom onSwitchingViews={this.handleSwitchingViews} />\n                    break;\n                case 'add_high_symptom':\n                    currentlyVisibleState = <AddHighSymptom onSwitchingViews={this.handleSwitchingViews} />\n                    break;\n                case 'graph':\n                    currentlyVisibleState = <Graph values={this.state.bloodSugarValues} onSwitchingViews={this.handleSwitchingViews} />\n                    break;\n                case 'home':\n                    currentlyVisibleState = <CurrentBloodSugar value={this.state.currentBloodSugar} currentAlert={this.state.currentAlert} onSwitchingViews={this.handleSwitchingViews} />\n                    break;\n                default:\n                    currentlyVisibleState = <CurrentBloodSugar value={this.state.currentBloodSugar} currentAlert={this.state.currentAlert} onSwitchingViews={this.handleSwitchingViews} />\n            }\n        } else {\n            currentlyVisibleState = <DexcomError />\n        }\n        return (\n            <React.Fragment>\n                {currentlyVisibleState}\n                <FootNavigation isLoggedIn={true} onSwitchingViews={this.handleSwitchingViews} currentAlert={this.state.currentAlert} />\n            </React.Fragment>\n        );\n    }\n}\n\nexport default AppControl;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}